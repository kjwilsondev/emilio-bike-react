(this["webpackJsonpcheckout-one-time-payments-react-cra"]=this["webpackJsonpcheckout-one-time-payments-react-cra"]||[]).push([[0],{23:function(e,t,a){e.exports=a(36)},34:function(e,t,a){},35:function(e,t,a){},36:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(19),s=a.n(c),i=a(11),l=a(1),o=a(12),u=a(6),m=a(20),d=a(7),p=a.n(d),h=a(9),y=a(21),E=function(){var e=Object(h.a)(p.a.mark((function e(t){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.quantity,e.abrupt("return",fetch("/create-checkout-session",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({quantity:a})}).then((function(e){return e.json()})));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),f=function(e){var t,a=e.amount,n=e.currency,r=e.quantity,c=new Intl.NumberFormat("en-US",{style:"currency",currency:n,currencyDisplay:"symbol"}),s=c.formatToParts(a),i=!0,l=Object(m.a)(s);try{for(l.s();!(t=l.n()).done;){"decimal"===t.value.type&&(i=!1)}}catch(u){l.e(u)}finally{l.f()}var o=(r*(a=i?a:a/100)).toFixed(2);return c.format(o)};function g(e,t){switch(t.type){case"useEffectUpdate":return Object(u.a)(Object(u.a)(Object(u.a)({},e),t.payload),{},{price:f({amount:t.payload.unitAmount,currency:t.payload.currency,quantity:e.quantity})});case"increment":return Object(u.a)(Object(u.a)({},e),{},{quantity:e.quantity+1,price:f({amount:e.unitAmount,currency:e.currency,quantity:e.quantity+1})});case"decrement":return Object(u.a)(Object(u.a)({},e),{},{quantity:e.quantity-1,price:f({amount:e.unitAmount,currency:e.currency,quantity:e.quantity-1})});case"setLoading":return Object(u.a)(Object(u.a)({},e),{},{loading:t.payload.loading});case"setError":return Object(u.a)(Object(u.a)({},e),{},{error:t.payload.error});default:throw new Error}}var b=function(){var e,t=Object(n.useReducer)(g,{quantity:1,price:null,loading:!1,error:null,stripe:null}),a=Object(o.a)(t,2),c=a[0],s=a[1];Object(n.useEffect)((function(){function e(){return(e=Object(h.a)(p.a.mark((function e(){var t,a,n,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("HERE 0"),e.next=3,fetch("/config").then((function(e){return console.log(e),e.json()}));case 3:return t=e.sent,a=t.publicKey,n=t.unitAmount,r=t.currency,console.log("HERE 1"),e.t0=s,e.t1=n,e.t2=r,e.next=13,Object(y.a)(a);case 13:e.t3=e.sent,e.t4={unitAmount:e.t1,currency:e.t2,stripe:e.t3},e.t5={type:"useEffectUpdate",payload:e.t4},(0,e.t0)(e.t5),console.log("HERE 2");case 18:case"end":return e.stop()}}),e)})))).apply(this,arguments)}console.log("CALL THE METHOD"),function(){e.apply(this,arguments)}()}),[]);var i=function(){var e=Object(h.a)(p.a.mark((function e(t){var a,n,r,i;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s({type:"setLoading",payload:{loading:!0}}),e.next=3,E({quantity:c.quantity});case 3:return a=e.sent,n=a.sessionId,e.next=7,c.stripe.redirectToCheckout({sessionId:n});case 7:r=e.sent,(i=r.error)&&(s({type:"setError",payload:{error:i}}),s({type:"setLoading",payload:{loading:!1}}));case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"sr-root"},r.a.createElement("div",{className:"sr-main"},r.a.createElement("header",{className:"sr-header"},r.a.createElement("div",{className:"sr-header__logo"})),r.a.createElement("section",{className:"container"},r.a.createElement("div",null,r.a.createElement("h1",null,r.a.createElement("center",null,"Wheelie in Paradise")),r.a.createElement("div",null," "),r.a.createElement("div",null),r.a.createElement("h4",null),r.a.createElement("div",{className:"pasha-image"},r.a.createElement("img",{alt:"Random asset from Picsum",src:"https://emilio-stolenbike.s3.us-west-1.amazonaws.com/shirt.png",width:"180",height:"200"}))),r.a.createElement("div",{className:"quantity-setter"},r.a.createElement("button",{className:"increment-btn",disabled:1===c.quantity,onClick:function(){return s({type:"decrement"})}},"-"),r.a.createElement("input",{type:"number",id:"quantity-input",min:"1",max:"10",value:c.quantity,readOnly:!0}),r.a.createElement("button",{className:"increment-btn",disabled:10===c.quantity,onClick:function(){return s({type:"increment"})}},"+")),r.a.createElement("p",{className:"sr-legal-text"}),r.a.createElement("button",{role:"link",onClick:i,disabled:!c.stripe||c.loading},c.loading||!c.price?"Loading...":"Buy for ".concat(c.price)),r.a.createElement("div",{id:"about2"},r.a.createElement("center",null,"We as a community are raising money on Emilio's behalf to help our friend buy a new bike.")),r.a.createElement("div",{className:"sr-field-error"},null===(e=c.error)||void 0===e?void 0:e.message))))},w=function(){var e=Object(n.useState)({}),t=Object(o.a)(e,2),a=(t[0],t[1]),c=Object(l.f)().search.replace("?session_id=","");return Object(n.useEffect)((function(){function e(){return(e=Object(h.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=a,e.next=3,fetch("/checkout-session?sessionId="+c).then((function(e){return e.json()}));case 3:e.t1=e.sent,(0,e.t0)(e.t1);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[c]),r.a.createElement("div",{className:"sr-root"},r.a.createElement("div",{className:"sr-main"},r.a.createElement("header",{className:"sr-header"},r.a.createElement("div",{className:"sr-header__logo"})),r.a.createElement("div",{className:"sr-payment-summary completed-view"},r.a.createElement("h1",null,"Your payment succeeded"),r.a.createElement("h4",null,"Thank you for your purchase!"))),r.a.createElement("div",{className:"sr-content"},r.a.createElement("div",{className:"pasha-image-stack"},r.a.createElement("img",{alt:"",src:"https://emilio-stolenbike.s3.us-west-1.amazonaws.com/kiyomi.png",width:"140",height:"160"}),r.a.createElement("img",{alt:"",src:"https://emilio-stolenbike.s3.us-west-1.amazonaws.com/malik.png",width:"140",height:"160"}),r.a.createElement("img",{alt:"",src:"https://emilio-stolenbike.s3.us-west-1.amazonaws.com/wheelie.png",width:"140",height:"160"}),r.a.createElement("img",{alt:"",src:"https://emilio-stolenbike.s3.us-west-1.amazonaws.com/wheelie.png",width:"140",height:"160"}))))},v=function(){return r.a.createElement("div",{className:"sr-root"},r.a.createElement("div",{className:"sr-main"},r.a.createElement("header",{className:"sr-header"},r.a.createElement("div",{className:"sr-header__logo"})),r.a.createElement("div",{className:"sr-payment-summary completed-view"},r.a.createElement("h1",null,"Your payment was canceled"),r.a.createElement(i.b,{to:"/"},"Home"))),r.a.createElement("div",{className:"sr-content"},r.a.createElement("div",{className:"pasha-image-stack"},r.a.createElement("img",{alt:"",src:"https://emilio-stolenbike.s3.us-west-1.amazonaws.com/kiyomi.png",width:"140",height:"160"}),r.a.createElement("img",{alt:"",src:"https://emilio-stolenbike.s3.us-west-1.amazonaws.com/malik.png",width:"140",height:"160"}),r.a.createElement("img",{alt:"",src:"https://emilio-stolenbike.s3.us-west-1.amazonaws.com/wheelie.png",width:"140",height:"160"}),r.a.createElement("img",{alt:"",src:"https://emilio-stolenbike.s3.us-west-1.amazonaws.com/wheelie.png",width:"140",height:"160"}))))};a(34),a(35);function k(){return r.a.createElement(i.a,null,r.a.createElement(l.c,null,r.a.createElement(l.a,{path:"/success.html"},r.a.createElement(w,null)),r.a.createElement(l.a,{path:"/canceled.html"},r.a.createElement(v,null)),r.a.createElement(l.a,{path:"/"},r.a.createElement(b,null))))}s.a.render(r.a.createElement(k,null),document.getElementById("root"))}},[[23,1,2]]]);
//# sourceMappingURL=main.4b1720d2.chunk.js.map