{"version":3,"sources":["components/Checkout.js","components/Success.js","components/Canceled.js","index.js"],"names":["fetchCheckoutSession","a","quantity","fetch","method","headers","body","JSON","stringify","then","res","json","formatPrice","amount","currency","numberFormat","Intl","NumberFormat","style","currencyDisplay","parts","formatToParts","zeroDecimalCurrency","type","total","toFixed","format","reducer","state","action","payload","price","unitAmount","loading","error","Error","Checkout","useReducer","stripe","dispatch","useEffect","console","log","publicKey","loadStripe","fetchConfig","handleClick","event","sessionId","redirectToCheckout","className","alt","src","width","height","disabled","onClick","id","min","max","value","readOnly","role","message","Success","useState","setSession","useLocation","search","replace","fetchSession","Canceled","to","App","path","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.4b1720d2.chunk.js","sourcesContent":["import React, { useEffect, useReducer } from \"react\";\nimport { loadStripe } from \"@stripe/stripe-js\";\n\nconst fetchCheckoutSession = async ({ quantity }) => {\n  return fetch(\"/create-checkout-session\", {\n    method: \"POST\",\n    headers: {\n      \"Content-Type\": \"application/json\",\n    },\n    body: JSON.stringify({\n      quantity,\n    }),\n  }).then((res) => res.json());\n};\n\nconst formatPrice = ({ amount, currency, quantity }) => {\n  const numberFormat = new Intl.NumberFormat(\"en-US\", {\n    style: \"currency\",\n    currency,\n    currencyDisplay: \"symbol\",\n  });\n  const parts = numberFormat.formatToParts(amount);\n  let zeroDecimalCurrency = true;\n  for (let part of parts) {\n    if (part.type === \"decimal\") {\n      zeroDecimalCurrency = false;\n    }\n  }\n  amount = zeroDecimalCurrency ? amount : amount / 100;\n  const total = (quantity * amount).toFixed(2);\n  return numberFormat.format(total);\n};\n\nfunction reducer(state, action) {\n  switch (action.type) {\n    case \"useEffectUpdate\":\n      return {\n        ...state,\n        ...action.payload,\n        price: formatPrice({\n          amount: action.payload.unitAmount,\n          currency: action.payload.currency,\n          quantity: state.quantity,\n        }),\n      };\n    case \"increment\":\n      return {\n        ...state,\n        quantity: state.quantity + 1,\n        price: formatPrice({\n          amount: state.unitAmount,\n          currency: state.currency,\n          quantity: state.quantity + 1,\n        }),\n      };\n    case \"decrement\":\n      return {\n        ...state,\n        quantity: state.quantity - 1,\n        price: formatPrice({\n          amount: state.unitAmount,\n          currency: state.currency,\n          quantity: state.quantity - 1,\n        }),\n      };\n    case \"setLoading\":\n      return { ...state, loading: action.payload.loading };\n    case \"setError\":\n      return { ...state, error: action.payload.error };\n    default:\n      throw new Error();\n  }\n}\n\nconst Checkout = () => {\n  const [state, dispatch] = useReducer(reducer, {\n    quantity: 1,\n    price: null,\n    loading: false,\n    error: null,\n    stripe: null,\n  });\n\n  useEffect(() => {\n    async function fetchConfig() {\n      console.log(\"HERE 0\");\n      // Fetch config from our backend.\n      const { publicKey, unitAmount, currency } = await fetch(\"/config\").then(\n        (res) => {\n          console.log(res);\n          return res.json();\n        }\n      );\n      // Make sure to call `loadStripe` outside of a componentâ€™s render to avoid\n      // recreating the `Stripe` object on every render.\n      console.log(\"HERE 1\");\n      dispatch({\n        type: \"useEffectUpdate\",\n        payload: { unitAmount, currency, stripe: await loadStripe(publicKey) },\n      });\n      console.log(\"HERE 2\");\n    }\n    console.log(\"CALL THE METHOD\");\n    fetchConfig();\n  }, []);\n\n  const handleClick = async (event) => {\n    // Call your backend to create the Checkout session.\n    dispatch({ type: \"setLoading\", payload: { loading: true } });\n    const { sessionId } = await fetchCheckoutSession({\n      quantity: state.quantity,\n    });\n    // When the customer clicks on the button, redirect them to Checkout.\n    const { error } = await state.stripe.redirectToCheckout({\n      sessionId,\n    });\n    // If `redirectToCheckout` fails due to a browser or network\n    // error, display the localized error message to your customer\n    // using `error.message`.\n    if (error) {\n      dispatch({ type: \"setError\", payload: { error } });\n      dispatch({ type: \"setLoading\", payload: { loading: false } });\n    }\n  };\n\n  return (\n    <div className=\"sr-root\">\n      <div className=\"sr-main\">\n        <header className=\"sr-header\">\n          <div className=\"sr-header__logo\"></div>\n        </header>\n        <section className=\"container\">\n          <div>\n            <h1>\n              <center>Wheelie in Paradise</center>\n            </h1>\n            <div> </div>\n            <div></div>\n            <h4></h4>\n            <div className=\"pasha-image\">\n              <img\n                alt=\"Random asset from Picsum\"\n                src=\"https://emilio-stolenbike.s3.us-west-1.amazonaws.com/shirt.png\"\n                width=\"180\"\n                height=\"200\"\n              />\n            </div>\n          </div>\n          <div className=\"quantity-setter\">\n            <button\n              className=\"increment-btn\"\n              disabled={state.quantity === 1}\n              onClick={() => dispatch({ type: \"decrement\" })}\n            >\n              -\n            </button>\n            <input\n              type=\"number\"\n              id=\"quantity-input\"\n              min=\"1\"\n              max=\"10\"\n              value={state.quantity}\n              readOnly\n            />\n            <button\n              className=\"increment-btn\"\n              disabled={state.quantity === 10}\n              onClick={() => dispatch({ type: \"increment\" })}\n            >\n              +\n            </button>\n          </div>\n          <p className=\"sr-legal-text\"></p>\n\n          <button\n            role=\"link\"\n            onClick={handleClick}\n            disabled={!state.stripe || state.loading}\n          >\n            {state.loading || !state.price\n              ? `Loading...`\n              : `Buy for ${state.price}`}\n          </button>\n          <div id=\"about2\">\n            <center>\n              We as a community are raising money on Emilio's behalf to help our\n              friend buy a new bike.\n            </center>\n          </div>\n          <div className=\"sr-field-error\">{state.error?.message}</div>\n        </section>\n      </div>\n    </div>\n  );\n};\n\nexport default Checkout;\n","import React, { useState, useEffect } from \"react\";\nimport { Link, useLocation } from \"react-router-dom\";\n\nconst Success = () => {\n  const [session, setSession] = useState({});\n  const location = useLocation();\n  const sessionId = location.search.replace(\"?session_id=\", \"\");\n\n  useEffect(() => {\n    async function fetchSession() {\n      setSession(\n        await fetch(\"/checkout-session?sessionId=\" + sessionId).then((res) =>\n          res.json()\n        )\n      );\n    }\n    fetchSession();\n  }, [sessionId]);\n\n  return (\n    <div className=\"sr-root\">\n      <div className=\"sr-main\">\n        <header className=\"sr-header\">\n          <div className=\"sr-header__logo\"></div>\n        </header>\n        <div className=\"sr-payment-summary completed-view\">\n          <h1>Your payment succeeded</h1>\n          <h4>Thank you for your purchase!</h4>\n        </div>\n      </div>\n      <div className=\"sr-content\">\n        <div className=\"pasha-image-stack\">\n          <img\n            alt=\"\"\n            src=\"https://emilio-stolenbike.s3.us-west-1.amazonaws.com/kiyomi.png\"\n            width=\"140\"\n            height=\"160\"\n          />\n          <img\n            alt=\"\"\n            src=\"https://emilio-stolenbike.s3.us-west-1.amazonaws.com/malik.png\"\n            width=\"140\"\n            height=\"160\"\n          />\n          <img\n            alt=\"\"\n            src=\"https://emilio-stolenbike.s3.us-west-1.amazonaws.com/wheelie.png\"\n            width=\"140\"\n            height=\"160\"\n          />\n          <img\n            alt=\"\"\n            src=\"https://emilio-stolenbike.s3.us-west-1.amazonaws.com/wheelie.png\"\n            width=\"140\"\n            height=\"160\"\n          />\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default Success;\n","import React from \"react\";\nimport { Link } from \"react-router-dom\";\n\nconst Canceled = () => {\n  return (\n    <div className=\"sr-root\">\n      <div className=\"sr-main\">\n        <header className=\"sr-header\">\n          <div className=\"sr-header__logo\"></div>\n        </header>\n        <div className=\"sr-payment-summary completed-view\">\n          <h1>Your payment was canceled</h1>\n          <Link to=\"/\">Home</Link>\n        </div>\n      </div>\n      <div className=\"sr-content\">\n        <div className=\"pasha-image-stack\">\n          <img\n            alt=\"\"\n            src=\"https://emilio-stolenbike.s3.us-west-1.amazonaws.com/kiyomi.png\"\n            width=\"140\"\n            height=\"160\"\n          />\n          <img\n            alt=\"\"\n            src=\"https://emilio-stolenbike.s3.us-west-1.amazonaws.com/malik.png\"\n            width=\"140\"\n            height=\"160\"\n          />\n          <img\n            alt=\"\"\n            src=\"https://emilio-stolenbike.s3.us-west-1.amazonaws.com/wheelie.png\"\n            width=\"140\"\n            height=\"160\"\n          />\n          <img\n            alt=\"\"\n            src=\"https://emilio-stolenbike.s3.us-west-1.amazonaws.com/wheelie.png\"\n            width=\"140\"\n            height=\"160\"\n          />\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default Canceled;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { BrowserRouter as Router, Switch, Route } from 'react-router-dom';\n\nimport Checkout from './components/Checkout';\nimport Success from './components/Success';\nimport Canceled from './components/Canceled';\n\nimport './css/normalize.css';\nimport './css/global.css';\n\nfunction App() {\n  return (\n    <Router>\n      <Switch>\n        <Route path=\"/success.html\">\n          <Success />\n        </Route>\n        <Route path=\"/canceled.html\">\n          <Canceled />\n        </Route>\n        <Route path=\"/\">\n          <Checkout />\n        </Route>\n      </Switch>\n    </Router>\n  );\n}\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}